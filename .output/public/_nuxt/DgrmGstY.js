import{_ as y}from"./CYp-rq5Y.js";import{_ as b,c as _,o as u,F as v,E as S,a as n,b as g,w as k,d as x,t as m,m as L,n as A,k as f,z as B,B as I}from"./BArHBqSu.js";import{g as $}from"./CrFpiiNM.js";import{a as h,s as j}from"./C4g1HbKR.js";const E={class:"flex gap-2 py-2 px-2"},N={__name:"Links",setup(w){const s=[{name:"Dashboard",path:"/admin/dashboard"},{name:"Posts",path:"/admin/list-of-posts"}];return(r,d)=>{const p=y;return u(),_("ul",E,[(u(),_(v,null,S(s,l=>n("li",{key:l.path,class:"text-sm hover:bg-indigo-700 font-semibold hover:text-white py-2 px-2 rounded-md text-gray-600"},[g(p,{to:l.path},{default:k(()=>[x(m(l.name),1)]),_:2},1032,["to"])])),64))])}}},P=b(N,[["__scopeId","data-v-c501ef9c"]]),U={class:"h-screen bg-slate-100"},C={class:"pt-20 mr-28 ml-28"},O={class:"rounded-md shadow-md flex justify-between mb-10 bg-white"},R={class:"p-2"},T={class:"text-indigo-500"},V={class:"mr-28 ml-28"},q={__name:"admin",setup(w){const s=$(),r=L(!1),d=I();async function p(){var c,e,i,o;try{const t=await $fetch(((c=d.public)==null?void 0:c.API_BASE_URL)+"/user-logged-in",{headers:{Accept:"application/json","content-type":"application/json",Authorization:`Bearer ${s==null?void 0:s.token}`},method:"POST"})}catch(t){r.value=!1,((e=t==null?void 0:t.response)==null?void 0:e.status)===401&&(h((o=(i=t.response)==null?void 0:i._data)==null?void 0:o.message),localStorage.clear(),window.location.href="/auth/login")}}async function l(){var c,e,i,o,t;try{r.value=!0;const a=await $fetch(((c=d.public)==null?void 0:c.API_BASE_URL)+"/logout",{headers:{Accept:"application/json","content-type":"application/json"},method:"POST",body:JSON.stringify({userId:(e=s==null?void 0:s.user)==null?void 0:e.id})});r.value=!1,localStorage.clear(),window.location.href="/auth/login",j(a==null?void 0:a.message)}catch(a){r.value=!1,((i=a==null?void 0:a.response)==null?void 0:i.status)===401&&(h((t=(o=a.response)==null?void 0:o._data)==null?void 0:t.message),localStorage.clear(),window.location.href="/auth/login")}}return A(async()=>{await p()}),(c,e)=>{var o,t;const i=P;return u(),_("div",U,[n("div",C,[n("nav",O,[g(i),n("div",R,[n("span",T,m((t=(o=f(s))==null?void 0:o.user)==null?void 0:t.email),1),e[0]||(e[0]=x(" - ")),n("button",{onClick:l,class:"p-2 rounded-full font-bold text-red-800"},m(f(r)?"processing...":"Logout"),1)])])]),n("div",null,[n("div",V,[B(c.$slots,"default")])])])}}};export{q as default};
