import{A as d,m as i,B as g}from"./BArHBqSu.js";import{g as v}from"./CrFpiiNM.js";import{s as h,a as y}from"./C4g1HbKR.js";const U=d("post-store",()=>{const s=i(!1),e=i({id:null,title:"",post_content:""}),l=g(),o=i(!1);async function m(){var u,p,f;const a=v();try{o.value=!0;const t=(u=l.public)==null?void 0:u.API_BASE_URL,n=s.value?t+"/posts/"+e.value.id:t+"/posts",c=s.value?"PUT":"POST",r=await $fetch(n,{headers:{Accept:"application/json","content-type":"application/json",Authorization:`Bearer ${a==null?void 0:a.token}`},method:c,body:JSON.stringify(e.value)});o.value=!1,s.value=!1,e.value={},h(r==null?void 0:r.message)}catch(t){if(o.value=!1,((p=t==null?void 0:t.response)==null?void 0:p.status)===422){const n=(f=t.response)==null?void 0:f._data;for(const c of n)y(c)}}}return{edit:s,postInput:e,loading:o,createPost:m,config:l}});export{U as u};
