import{_ as b}from"./CYp-rq5Y.js";import{m as p,c as v,o as y,a as e,q as c,b as h,v as m,k as n,w as k,d as N,t as S,B}from"./BArHBqSu.js";import{a as f}from"./C4g1HbKR.js";const V={class:"bg-slate-100 h-screen"},C={class:"flex justify-between"},E={class:"w-[300px] mt-20"},L={class:"flex flex-col gap-2"},P=["disabled"],I={__name:"login",setup(U){const a=p({email:"",password:""}),i=p(!1),g=B();async function x(){var d,t,l,o,r,u;try{i.value=!0;const s=await $fetch(((d=g.public)==null?void 0:d.API_BASE_URL)+"/login",{headers:{Accept:"application/json","content-type":"application/json"},method:"POST",body:JSON.stringify(a.value)});i.value=!1,console.log(s),localStorage.setItem("userData",JSON.stringify({user:s==null?void 0:s.user,token:s==null?void 0:s.token})),window.location.href="/admin/dashboard"}catch(s){if(i.value=!1,((t=s==null?void 0:s.response)==null?void 0:t.status)===401&&f((o=(l=s.response)==null?void 0:l._data)==null?void 0:o.message),((r=s==null?void 0:s.response)==null?void 0:r.status)===422){const _=(u=s.response)==null?void 0:u._data;for(const w of _)f(w)}}}return(d,t)=>{const l=b;return y(),v("div",V,[e("div",C,[t[4]||(t[4]=e("div",null,null,-1)),e("div",E,[e("div",L,[t[3]||(t[3]=e("h1",{class:"text-2xl"},"Login",-1)),c(e("input",{type:"text",name:"","onUpdate:modelValue":t[0]||(t[0]=o=>n(a).email=o),placeholder:"Email",id:"",class:"py-2 px-2 text-sm rounded-md shadow-sm focus:ring focus:ring-blue-300"},null,512),[[m,n(a).email]]),c(e("input",{type:"password",name:"","onUpdate:modelValue":t[1]||(t[1]=o=>n(a).password=o),placeholder:"Password",id:"",class:"py-2 px-2 text-sm rounded-md shadow-sm focus:ring focus:ring-blue-300"},null,512),[[m,n(a).password]]),h(l,{to:"/auth/register",class:"text-indigo-700 focus:ring focus:ring-blue-300"},{default:k(()=>t[2]||(t[2]=[N("Create an account")])),_:1}),e("button",{onClick:x,disabled:n(i),class:"rounded-md text-white py-2 bg-indigo-700 text-sm font-semibold"},S(n(i)?"Processing...":"Login"),9,P)])]),t[5]||(t[5]=e("div",null,null,-1))])])}}};export{I as default};
